<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cart with Confirmation and WhatsApp</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
</head>
<body>
  <div class="container mt-5">
    <div class="row">
      <!-- Cart Section -->
      <div class="col-md-6 offset-md-3">
        <h3>Your Cart</h3>
        <div class="card">
          <div class="card-body">
            <div class="cart-items" id="cart-items">
              <!-- Cart items will be loaded dynamically -->
            </div>
            <hr>
            <h5>Total: ₹<span id="total-price">0</span></h5>
            <button class="btn btn-success btn-block" id="checkout-btn" data-toggle="modal" data-target="#checkoutModal" disabled>Checkout</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Checkout Modal -->
  <div class="modal fade" id="checkoutModal" tabindex="-1" aria-labelledby="checkoutModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="checkoutModalLabel">Confirm Your Order</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <div id="order-summary">
            <!-- Order summary will be dynamically populated -->
          </div>
          <hr>
          <h5>Total: ₹<span id="modal-total-price">0</span></h5>
          <p>Are you sure you want to place this order?</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
          <button type="button" class="btn btn-primary" id="confirm-order-btn">Place Order</button>
        </div>
      </div>
    </div>
  </div>                                 
                   <!-- Order Confirmation Modal -->
<div class="modal fade" id="orderConfirmationModal" tabindex="-1" aria-labelledby="orderConfirmationLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="orderConfirmationLabel">Confirm Your Order</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body" id="confirmation-details">
        <!-- Order details will be injected here -->
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-primary" id="confirm-order-btn">Confirm Order</button>
      </div>
    </div>
  </div>
</div>

<!-- Checkout Button -->
<button class="btn btn-success" id="checkout-btn">Checkout</button>

  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // Sample data for cart


    const cartContainer = document.getElementById('cart-items');
    const totalPriceElement = document.getElementById('total-price');
    const checkoutBtn = document.getElementById('checkout-btn');
    const confirmOrderBtn = document.getElementById('confirm-order-btn');

    // Function to render cart items
    function renderCart() {
      cartContainer.innerHTML = '';
      let total = 0;

      cartItems.forEach((item, index) => {
        total += item.price * item.quantity;
        const itemDiv = document.createElement('div');
        itemDiv.classList.add('d-flex', 'justify-content-between', 'mb-2');
        itemDiv.innerHTML = `
          <div>
            <strong>${item.name}</strong> (x${item.quantity})
          </div>
          <div>₹${item.price * item.quantity}</div>
        `;
        cartContainer.appendChild(itemDiv);
      });

      totalPriceElement.innerText = total;
      checkoutBtn.disabled = total === 0;
    }

    // Function to populate checkout modal
    function populateCheckoutModal() {
      const orderSummary = document.getElementById('order-summary');
      const modalTotalPrice = document.getElementById('modal-total-price');
      orderSummary.innerHTML = '';

      cartItems.forEach((item) => {
        const summaryDiv = document.createElement('div');
        summaryDiv.classList.add('d-flex', 'justify-content-between', 'mb-2');
        summaryDiv.innerHTML = `
          <div>${item.name} (x${item.quantity})</div>
          <div>₹${item.price * item.quantity}</div>
        `;
        orderSummary.appendChild(summaryDiv);
      });

      modalTotalPrice.innerText = totalPriceElement.innerText;
    }

    // Function to confirm order and send WhatsApp message
    function confirmOrder() {
      const total = totalPriceElement.innerText;
      const orderDetails = cartItems.map(item => `${item.name} (x${item.quantity}) - ₹${item.price * item.quantity}`).join('%0A');
      const message = `Order Confirmed!%0A%0AItems:%0A${orderDetails}%0A%0ATotal: ₹${total}`;
      const whatsappURL = `https://wa.me/919876543210?text=${message}`;

      // Simulate order confirmation
      alert("Your order has been placed successfully!");

      // Send message on WhatsApp
      window.open(whatsappURL, '_blank');

      // Close modal
      $('#checkoutModal').modal('hide');
    }

    // Event listeners
    checkoutBtn.addEventListener('click', populateCheckoutModal);
    confirmOrderBtn.addEventListener('click', confirmOrder);

    // Initialize cart
    renderCart();
  </script>
</body>
</html>